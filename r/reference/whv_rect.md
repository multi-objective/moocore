# Compute (total) weighted hypervolume given a set of rectangles

Calculates the hypervolume weighted by a set of rectangles (with zero
weight outside the rectangles). The function `total_whv_rect()`
calculates the total weighted hypervolume as
[`hypervolume()`](https://multi-objective.github.io/moocore/r/reference/hypervolume.md)` + scalefactor * abs(prod(reference - ideal)) * whv_rect()`.
The details of the computation are given by Diaz and López-Ibáñez (2021)
.

## Usage

``` r
whv_rect(x, rectangles, reference, maximise = FALSE)

total_whv_rect(
  x,
  rectangles,
  reference,
  maximise = FALSE,
  ideal = NULL,
  scalefactor = 0.1
)
```

## Arguments

- x:

  [`matrix()`](https://rdrr.io/r/base/matrix.html)\|[`data.frame()`](https://rdrr.io/r/base/data.frame.html)  
  Matrix or data frame of numerical values, where each row gives the
  coordinates of a point.

- rectangles:

  [`matrix()`](https://rdrr.io/r/base/matrix.html)  
  Weighted rectangles that will bias the computation of the hypervolume.
  Maybe generated by
  [`eafdiff()`](https://multi-objective.github.io/moocore/r/reference/eafdiff.md)
  with `rectangles=TRUE` or by
  [`choose_eafdiff()`](https://multi-objective.github.io/moocore/r/reference/choose_eafdiff.md).

- reference:

  [`numeric()`](https://rdrr.io/r/base/numeric.html)  
  Reference point as a vector of numerical values.

- maximise:

  [`logical()`](https://rdrr.io/r/base/logical.html)  
  Whether the objectives must be maximised instead of minimised. Either
  a single logical value that applies to all objectives or a vector of
  logical values, with one value per objective.

- ideal:

  [`numeric()`](https://rdrr.io/r/base/numeric.html)  
  Ideal point as a vector of numerical values. If `NULL`, it is
  calculated as minimum (or maximum if maximising that objective) of
  each objective in the input data.

- scalefactor:

  `numeric(1)`  
  Real value within \\(0,1\]\\ that scales the overall weight of the
  differences. This is parameter psi (\\\psi\\) in Diaz and
  López-Ibáñez (2021) .

## Value

`numeric(1)` A single numerical value.

## Details

TODO

## References

Juan Esteban Diaz, Manuel López-Ibáñez (2021). “Incorporating
Decision-Maker's Preferences into the Automatic Configuration of
Bi-Objective Optimisation Algorithms.” *European Journal of Operational
Research*, **289**(3), 1209–1222.
[doi:10.1016/j.ejor.2020.07.059](https://doi.org/10.1016/j.ejor.2020.07.059)
.

## See also

[`read_datasets()`](https://multi-objective.github.io/moocore/r/reference/read_datasets.md),
[`eafdiff()`](https://multi-objective.github.io/moocore/r/reference/eafdiff.md),
[`choose_eafdiff()`](https://multi-objective.github.io/moocore/r/reference/choose_eafdiff.md),
[`whv_hype()`](https://multi-objective.github.io/moocore/r/reference/whv_hype.md)

## Examples

``` r
rectangles <- as.matrix(read.table(header=FALSE, text='
 1.0  3.0  2.0  Inf    1
 2.0  3.5  2.5  Inf    2
 2.0  3.0  3.0  3.5    3
'))
whv_rect (matrix(2, ncol=2), rectangles, reference = 6)
#> [1] 4
whv_rect (matrix(c(2, 1), ncol=2), rectangles, reference = 6)
#> [1] 4
whv_rect (matrix(c(1, 2), ncol=2), rectangles, reference = 6)
#> [1] 7

total_whv_rect (matrix(2, ncol=2), rectangles, reference = 6, ideal = c(1,1))
#> [1] 26
total_whv_rect (matrix(c(2, 1), ncol=2), rectangles, reference = 6, ideal = c(1,1))
#> [1] 30
total_whv_rect (matrix(c(1, 2), ncol=2), rectangles, reference = 6, ideal = c(1,1))
#> [1] 37.5
```
